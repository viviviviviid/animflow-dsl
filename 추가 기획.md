ì¢‹ì•„ìš”! ë“œë˜ê·¸ì•¤ë“œë¡­ ë¸”ë¡ íŒ”ë ˆíŠ¸ì™€ ë³€í™˜ ë¡œì§ì„ ìƒì„¸íˆ ê¸°íší•˜ê² ìŠµë‹ˆë‹¤.

---

# 1. ë“œë˜ê·¸ì•¤ë“œë¡­ ë¸”ë¡ íŒ”ë ˆíŠ¸ ì„¤ê³„

## ì „ì²´ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¸”ë¡ íŒ”ë ˆíŠ¸     â”‚   ì‘ì—… ìº”ë²„ìŠ¤            â”‚
â”‚  (Block Palette)â”‚   (Canvas)              â”‚
â”‚                 â”‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   [ì—¬ê¸°ì— ë¸”ë¡ ë“œë¡­]     â”‚
â”‚  â”‚ ë…¸ë“œ      â”‚  â”‚                         â”‚
â”‚  â”‚ ì—°ê²°ì„     â”‚  â”‚                         â”‚
â”‚  â”‚ ì• ë‹ˆë©”ì´ì…˜â”‚  â”‚                         â”‚
â”‚  â”‚ ìŠ¤íƒ€ì¼    â”‚  â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                         â”‚
â”‚                 â”‚                         â”‚
â”‚  [ì†ì„± íŒ¨ë„]    â”‚   [ì½”ë“œ ë¯¸ë¦¬ë³´ê¸°]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë¸”ë¡ íŒ”ë ˆíŠ¸ êµ¬ì¡°

### ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜

```
ğŸ“¦ ë¸”ë¡ íŒ”ë ˆíŠ¸
â”œâ”€ ğŸ“ ë…¸ë“œ (Nodes)
â”‚  â”œâ”€ ê¸°ë³¸ ë…¸ë“œ
â”‚  â”œâ”€ íŠ¹ìˆ˜ ë…¸ë“œ
â”‚  â””â”€ ì»¤ìŠ¤í…€ ë…¸ë“œ
â”‚
â”œâ”€ ğŸ”— ì—°ê²°ì„  (Connections)
â”‚  â”œâ”€ ê¸°ë³¸ í™”ì‚´í‘œ
â”‚  â”œâ”€ ì–‘ë°©í–¥ í™”ì‚´í‘œ
â”‚  â””â”€ ë ˆì´ë¸” ì—°ê²°ì„ 
â”‚
â”œâ”€ âœ¨ ì• ë‹ˆë©”ì´ì…˜ (Animation)
â”‚  â”œâ”€ ë“±ì¥ íš¨ê³¼
â”‚  â”œâ”€ ê°•ì¡° íš¨ê³¼
â”‚  â”œâ”€ ì—°ê²° íš¨ê³¼
â”‚  â””â”€ ì¹´ë©”ë¼ íš¨ê³¼
â”‚
â”œâ”€ ğŸ¨ ìŠ¤íƒ€ì¼ (Style)
â”‚  â”œâ”€ ìƒ‰ìƒ íŒ”ë ˆíŠ¸
â”‚  â”œâ”€ í…Œë§ˆ
â”‚  â””â”€ ì´í™íŠ¸
â”‚
â””â”€ ğŸ’¬ ë‚´ë ˆì´ì…˜ (Narration)
   â”œâ”€ í…ìŠ¤íŠ¸ ë°•ìŠ¤
   â””â”€ ì£¼ì„
```

---

## 1.1 ë…¸ë“œ ë¸”ë¡ (Nodes)

### ê¸°ë³¸ ë…¸ë“œ ë¸”ë¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [  ì‹œì‘/ë  ]      â”‚  â† íƒ€ì›í˜• (Terminator)
â”‚  ì‚¬ìš©: í”„ë¡œì„¸ìŠ¤ ì‹œì‘/ì¢…ë£Œ
â”‚  
â”‚  [  í”„ë¡œì„¸ìŠ¤  ]     â”‚  â† ì‚¬ê°í˜• (Process)
â”‚  ì‚¬ìš©: ì‘ì—…, ë‹¨ê³„
â”‚  
â”‚  [  ê²°ì •/ë¶„ê¸° ]     â”‚  â† ë‹¤ì´ì•„ëª¬ë“œ (Decision)
â”‚  ì‚¬ìš©: ì¡°ê±´, ifë¬¸
â”‚  
â”‚  [   ë°ì´í„°   ]     â”‚  â† í‰í–‰ì‚¬ë³€í˜• (Data)
â”‚  ì‚¬ìš©: ì…ë ¥/ì¶œë ¥
â”‚  
â”‚  [  ì €ì¥ì†Œ    ]     â”‚  â† ì›í†µí˜• (Database)
â”‚  ì‚¬ìš©: DB, ì €ì¥
â”‚  
â”‚  [   ë¬¸ì„œ     ]     â”‚  â† ë¬¸ì„œ ëª¨ì–‘ (Document)
â”‚  ì‚¬ìš©: íŒŒì¼, ë¬¸ì„œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¸”ë¡ ìƒì„¸ ì •ë³´

#### ì‹œì‘/ë ë¸”ë¡
```json
{
  "type": "node",
  "shape": "terminator",
  "icon": "ğŸ",
  "defaultLabel": "ì‹œì‘",
  "properties": {
    "label": { "type": "text", "required": true },
    "id": { "type": "auto", "prefix": "start_" },
    "color": { "type": "color", "default": "#4CAF50" }
  },
  "dsl_template": "{id}[{label}]"
}
```

#### í”„ë¡œì„¸ìŠ¤ ë¸”ë¡
```json
{
  "type": "node",
  "shape": "rectangle",
  "icon": "âš™ï¸",
  "defaultLabel": "í”„ë¡œì„¸ìŠ¤",
  "properties": {
    "label": { "type": "text", "required": true },
    "subtitle": { "type": "text", "optional": true },
    "id": { "type": "auto", "prefix": "proc_" },
    "color": { "type": "color", "default": "#2196F3" }
  },
  "dsl_template": "{id}[{label}]"
}
```

#### ê²°ì •/ë¶„ê¸° ë¸”ë¡
```json
{
  "type": "node",
  "shape": "diamond",
  "icon": "â“",
  "defaultLabel": "ì¡°ê±´?",
  "properties": {
    "label": { "type": "text", "required": true },
    "trueLabel": { "type": "text", "default": "Yes" },
    "falseLabel": { "type": "text", "default": "No" },
    "id": { "type": "auto", "prefix": "cond_" },
    "color": { "type": "color", "default": "#FF9800" }
  },
  "dsl_template": "{id}{{{label}}}"
}
```

---

## 1.2 ì—°ê²°ì„  ë¸”ë¡ (Connections)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”€â”€â”€â”€â”€â”€â†’            â”‚  ë‹¨ë°©í–¥ í™”ì‚´í‘œ
â”‚  
â”‚  â†â”€â”€â”€â”€â”€â”€â†’           â”‚  ì–‘ë°©í–¥ í™”ì‚´í‘œ
â”‚  
â”‚  â”€ â”€ â”€ â†’           â”‚  ì ì„  í™”ì‚´í‘œ
â”‚  
â”‚  â•â•â•â•â•â•â•â†’           â”‚  êµµì€ í™”ì‚´í‘œ
â”‚  
â”‚  â”€â”€â”€[í…ìŠ¤íŠ¸]â”€â”€â†’     â”‚  ë ˆì´ë¸” í™”ì‚´í‘œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì—°ê²°ì„  ë¸”ë¡ ì •ë³´

```json
{
  "type": "connection",
  "icon": "â¡ï¸",
  "defaultLabel": "",
  "properties": {
    "from": { "type": "node_ref", "required": true },
    "to": { "type": "node_ref", "required": true },
    "label": { "type": "text", "optional": true },
    "style": { 
      "type": "select", 
      "options": ["solid", "dashed", "dotted", "thick"],
      "default": "solid"
    },
    "arrow": { 
      "type": "select", 
      "options": ["single", "double", "none"],
      "default": "single"
    }
  },
  "dsl_template": "{from} -->|{label}| {to}"
}
```

---

## 1.3 ì• ë‹ˆë©”ì´ì…˜ ë¸”ë¡ (Animation)

### ë“±ì¥ íš¨ê³¼ ë¸”ë¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨ Fade In         â”‚
â”‚  ì„œì„œíˆ ë‚˜íƒ€ë‚¨
â”‚  
â”‚  ğŸ“¥ Slide In        â”‚
â”‚  ìŠ¬ë¼ì´ë“œ ë“±ì¥
â”‚  
â”‚  ğŸ“ˆ Scale In        â”‚
â”‚  ì‘ê²Œâ†’í¬ê²Œ
â”‚  
â”‚  ğŸ¾ Bounce In       â”‚
â”‚  íŠ•ê¸°ë©° ë“±ì¥
â”‚  
â”‚  ğŸ”„ Rotate In       â”‚
â”‚  íšŒì „í•˜ë©° ë“±ì¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì• ë‹ˆë©”ì´ì…˜ ë¸”ë¡ ì •ë³´

```json
{
  "type": "animation",
  "category": "entrance",
  "name": "fadeIn",
  "icon": "âœ¨",
  "displayName": "Fade In",
  "description": "ì„œì„œíˆ ë‚˜íƒ€ë‚¨",
  "properties": {
    "target": { "type": "node_ref", "required": true },
    "duration": { "type": "time", "default": "1s", "min": "0.1s", "max": "5s" },
    "delay": { "type": "time", "default": "0s" },
    "easing": { 
      "type": "select", 
      "options": ["linear", "ease-in", "ease-out", "ease-in-out"],
      "default": "ease-in-out"
    }
  },
  "dsl_template": "step {step}: show {target}\n  duration: {duration}\n  effect: fadeIn\n  delay: {delay}\n  easing: {easing}"
}
```

### ê°•ì¡° íš¨ê³¼ ë¸”ë¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’« Pulse           â”‚
â”‚  ë§¥ë°• íš¨ê³¼
â”‚  
â”‚  ğŸ”† Glow            â”‚
â”‚  ë¹›ë‚˜ëŠ” íš¨ê³¼
â”‚  
â”‚  ğŸ“³ Shake           â”‚
â”‚  í”ë“¤ë¦¼
â”‚  
â”‚  âš¡ Flash           â”‚
â”‚  ê¹œë¹¡ì„
â”‚  
â”‚  ğŸ¨ Color Change    â”‚
â”‚  ìƒ‰ìƒ ë³€í™”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì—°ê²° íš¨ê³¼ ë¸”ë¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨ Particles       â”‚
â”‚  ì…ì íë¦„
â”‚  
â”‚  - - Dashed Line    â”‚
â”‚  ì ì„  ì´ë™
â”‚  
â”‚  ğŸ’¡ Glow Line       â”‚
â”‚  ë¹›ë‚˜ëŠ” ì„ 
â”‚  
â”‚  ğŸŒŠ Wave            â”‚
â”‚  ë¬¼ê²° íš¨ê³¼
â”‚  
â”‚  âš¡ Lightning       â”‚
â”‚  ë²ˆê°œ íš¨ê³¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```json
{
  "type": "animation",
  "category": "flow",
  "name": "particles",
  "icon": "âœ¨",
  "displayName": "Particles Flow",
  "description": "ì—°ê²°ì„ ì„ ë”°ë¼ ì…ìê°€ íë¦„",
  "properties": {
    "from": { "type": "node_ref", "required": true },
    "to": { "type": "node_ref", "required": true },
    "speed": { "type": "time", "default": "2s" },
    "color": { "type": "color", "default": "#2196F3" },
    "particleCount": { "type": "number", "default": 20, "min": 5, "max": 100 }
  },
  "dsl_template": "step {step}: connect {from}->{to}\n  flow: particles\n  speed: {speed}\n  color: {color}"
}
```

### ì¹´ë©”ë¼ íš¨ê³¼ ë¸”ë¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Focus Node      â”‚
â”‚  íŠ¹ì • ë…¸ë“œë¡œ ì¤Œì¸
â”‚  
â”‚  ğŸŒ Fit All         â”‚
â”‚  ì „ì²´ ë³´ê¸°
â”‚  
â”‚  ğŸ“¸ Zoom            â”‚
â”‚  í™•ëŒ€/ì¶•ì†Œ
â”‚  
â”‚  â†”ï¸  Pan            â”‚
â”‚  í™”ë©´ ì´ë™
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1.4 ìŠ¤íƒ€ì¼ ë¸”ë¡ (Style)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¨ ìƒ‰ìƒ íŒ”ë ˆíŠ¸
â”‚  â— â— â— â— â— â— â— â—
â”‚  
â”‚  ğŸ“ í¬ê¸° ì¡°ì ˆ
â”‚  [â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€]
â”‚  
â”‚  âœï¸ í…Œë‘ë¦¬
â”‚  [êµµê¸°] [ìŠ¤íƒ€ì¼] [ìƒ‰ìƒ]
â”‚  
â”‚  ğŸ’« ê·¸ë¦¼ì
â”‚  [ê±°ë¦¬] [ë²ˆì§] [ìƒ‰ìƒ]
â”‚  
â”‚  ğŸ”¤ í…ìŠ¤íŠ¸
â”‚  [ê¸€ê¼´] [í¬ê¸°] [ì •ë ¬]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1.5 ë‚´ë ˆì´ì…˜ ë¸”ë¡ (Narration)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ ì„¤ëª… í…ìŠ¤íŠ¸
â”‚  [ì œëª© ì…ë ¥]
â”‚  [ë‚´ìš© ì…ë ¥]
â”‚  
â”‚  ğŸ“Œ ì£¼ì„/í¬ì¸í„°
â”‚  [í…ìŠ¤íŠ¸]
â”‚  [ìœ„ì¹˜: ìƒ/í•˜/ì¢Œ/ìš°]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 2. ë¸”ë¡ â†’ DSL ë³€í™˜ ë¡œì§

## 2.1 ë³€í™˜ í”„ë¡œì„¸ìŠ¤ ê°œìš”

```
ì‚¬ìš©ì ì•¡ì…˜
    â†“
[1] ë¸”ë¡ ë“œë˜ê·¸ â†’ ìº”ë²„ìŠ¤ ë°°ì¹˜
    â†“
[2] ë¸”ë¡ ë°ì´í„° ìƒì„± (JSON)
    â†“
[3] ì‹¤ì‹œê°„ DSL ìƒì„±
    â†“
[4] ìš°ì¸¡ ì½”ë“œ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸
    â†“
[5] ë‹¤ì´ì–´ê·¸ë¨ ë Œë”ë§
```

---

## 2.2 ë¸”ë¡ ë°ì´í„° êµ¬ì¡° (ë‚´ë¶€ JSON)

### ìº”ë²„ìŠ¤ ìƒíƒœ (ì „ì²´)

```json
{
  "metadata": {
    "id": "diagram_001",
    "title": "ë¸”ë¡ì²´ì¸ êµ¬ì¡°",
    "type": "flowchart",
    "direction": "LR",
    "created": "2024-02-15T10:30:00Z",
    "modified": "2024-02-15T11:00:00Z"
  },
  
  "nodes": [
    {
      "id": "node_1",
      "type": "terminator",
      "label": "Genesis Block",
      "subtitle": "Hash: 0000",
      "position": { "x": 100, "y": 200 },
      "style": {
        "fill": "#e8f5e9",
        "stroke": "#4CAF50",
        "strokeWidth": 3
      }
    },
    {
      "id": "node_2",
      "type": "rectangle",
      "label": "Block #1",
      "subtitle": "Hash: a1b2\nPrev: 0000",
      "position": { "x": 400, "y": 200 }
    }
  ],
  
  "connections": [
    {
      "id": "conn_1",
      "from": "node_1",
      "to": "node_2",
      "label": "",
      "style": "solid"
    }
  ],
  
  "animations": [
    {
      "step": 1,
      "type": "show",
      "target": "node_1",
      "effect": "fadeIn",
      "duration": "1.5s",
      "delay": "0s"
    },
    {
      "step": 2,
      "type": "highlight",
      "target": "node_1",
      "color": "#4CAF50",
      "glow": true,
      "duration": "1s"
    },
    {
      "step": 3,
      "type": "connect",
      "from": "node_1",
      "to": "node_2",
      "flow": "particles",
      "speed": "2s"
    }
  ],
  
  "narrations": [
    {
      "step": 1,
      "title": "Genesis Block ìƒì„±",
      "text": "ë¸”ë¡ì²´ì¸ì˜ ì²« ë²ˆì§¸ ë¸”ë¡ì´ ìƒì„±ë©ë‹ˆë‹¤."
    }
  ],
  
  "config": {
    "autoplay": true,
    "loop": false,
    "controls": true,
    "speed": 1.0
  }
}
```

---

## 2.3 ë³€í™˜ ë¡œì§ (JSON â†’ DSL)

### ë³€í™˜ í•¨ìˆ˜ êµ¬ì¡°

```javascript
class DslGenerator {
  constructor(canvasData) {
    this.data = canvasData;
    this.dsl = "";
  }
  
  generate() {
    this.generateDiagram();
    this.generateAnimation();
    this.generateStyle();
    this.generateNarration();
    this.generateConfig();
    
    return this.dsl;
  }
  
  generateDiagram() { /* ... */ }
  generateAnimation() { /* ... */ }
  generateStyle() { /* ... */ }
  generateNarration() { /* ... */ }
  generateConfig() { /* ... */ }
}
```

### 1) ë‹¤ì´ì–´ê·¸ë¨ ì„¹ì…˜ ìƒì„±

```javascript
generateDiagram() {
  const { type, direction } = this.data.metadata;
  
  // í—¤ë”
  this.dsl += `${type} ${direction}\n`;
  
  // ë…¸ë“œ ì •ì˜
  this.data.nodes.forEach(node => {
    const shape = this.getShapeNotation(node.type);
    const label = this.formatLabel(node.label, node.subtitle);
    this.dsl += `  ${node.id}${shape[0]}${label}${shape[1]}\n`;
  });
  
  this.dsl += "\n";
  
  // ì—°ê²°ì„  ì •ì˜
  this.data.connections.forEach(conn => {
    const arrow = this.getArrowNotation(conn.style);
    const label = conn.label ? `|${conn.label}|` : "";
    this.dsl += `  ${conn.from} ${arrow}${label} ${conn.to}\n`;
  });
  
  this.dsl += "\n";
}

getShapeNotation(type) {
  const shapes = {
    'terminator': ['([', '])'],
    'rectangle': ['[', ']'],
    'diamond': ['{', '}'],
    'parallelogram': ['[/', '/]'],
    'database': ['[(', ')]'],
    'document': ['[[', ']]']
  };
  return shapes[type] || ['[', ']'];
}

formatLabel(label, subtitle) {
  if (subtitle) {
    return `${label}<br/>${subtitle}`;
  }
  return label;
}

getArrowNotation(style) {
  const arrows = {
    'solid': '-->',
    'dashed': '-. ->',
    'dotted': '-.->',
    'thick': '==>'
  };
  return arrows[style] || '-->';
}
```

**ìƒì„± ê²°ê³¼:**
```
flowchart LR
  node_1([Genesis Block<br/>Hash: 0000])
  node_2[Block #1<br/>Hash: a1b2<br/>Prev: 0000]
  
  node_1 --> node_2
```

---

### 2) ì• ë‹ˆë©”ì´ì…˜ ì„¹ì…˜ ìƒì„±

```javascript
generateAnimation() {
  if (this.data.animations.length === 0) return;
  
  this.dsl += "@animation\n";
  
  // ìŠ¤í…ë³„ë¡œ ê·¸ë£¹í™”
  const stepGroups = this.groupByStep(this.data.animations);
  
  stepGroups.forEach((anims, stepNum) => {
    anims.forEach(anim => {
      this.dsl += this.generateAnimationStep(stepNum, anim);
    });
  });
  
  this.dsl += "@end\n\n";
}

groupByStep(animations) {
  const groups = new Map();
  animations.forEach(anim => {
    if (!groups.has(anim.step)) {
      groups.set(anim.step, []);
    }
    groups.get(anim.step).push(anim);
  });
  return groups;
}

generateAnimationStep(stepNum, anim) {
  let step = `  step ${stepNum}: `;
  
  switch(anim.type) {
    case 'show':
      step += `show ${anim.target}\n`;
      step += `    duration: ${anim.duration}\n`;
      step += `    effect: ${anim.effect}\n`;
      if (anim.delay && anim.delay !== '0s') {
        step += `    delay: ${anim.delay}\n`;
      }
      break;
      
    case 'highlight':
      step += `highlight ${anim.target}\n`;
      step += `    color: ${anim.color}\n`;
      if (anim.glow) {
        step += `    glow: true\n`;
      }
      if (anim.pulse) {
        step += `    pulse: true\n`;
      }
      step += `    duration: ${anim.duration}\n`;
      break;
      
    case 'connect':
      step += `connect ${anim.from}->${anim.to}\n`;
      step += `    flow: ${anim.flow}\n`;
      step += `    speed: ${anim.speed}\n`;
      if (anim.color) {
        step += `    color: ${anim.color}\n`;
      }
      break;
      
    case 'camera':
      step += `camera ${anim.action}`;
      if (anim.target) {
        step += ` ${anim.target}`;
      }
      step += `\n`;
      if (anim.duration) {
        step += `    duration: ${anim.duration}\n`;
      }
      if (anim.zoom) {
        step += `    zoom: ${anim.zoom}\n`;
      }
      break;
  }
  
  step += "\n";
  return step;
}
```

**ìƒì„± ê²°ê³¼:**
```
@animation
  step 1: show node_1
    duration: 1.5s
    effect: fadeIn

  step 2: highlight node_1
    color: #4CAF50
    glow: true
    duration: 1s

  step 3: connect node_1->node_2
    flow: particles
    speed: 2s

@end
```

---

### 3) ìŠ¤íƒ€ì¼ ì„¹ì…˜ ìƒì„±

```javascript
generateStyle() {
  const hasCustomStyles = this.data.nodes.some(n => n.style) ||
                          this.data.connections.some(c => c.style);
  
  if (!hasCustomStyles) return;
  
  this.dsl += "@style\n";
  
  // ë…¸ë“œ ìŠ¤íƒ€ì¼
  this.data.nodes.forEach(node => {
    if (node.style) {
      this.dsl += `  ${node.id}:\n`;
      Object.entries(node.style).forEach(([key, value]) => {
        const cssKey = this.camelToKebab(key);
        this.dsl += `    ${cssKey}: ${value}\n`;
      });
    }
  });
  
  // ì—°ê²°ì„  ìŠ¤íƒ€ì¼
  const connStyles = this.data.connections.filter(c => c.customStyle);
  if (connStyles.length > 0) {
    this.dsl += `  connection:\n`;
    // ... ìŠ¤íƒ€ì¼ ì¶”ê°€
  }
  
  this.dsl += "@end\n\n";
}

camelToKebab(str) {
  return str.replace(/([A-Z])/g, '-$1').toLowerCase();
}
```

**ìƒì„± ê²°ê³¼:**
```
@style
  node_1:
    fill: #e8f5e9
    stroke: #4CAF50
    stroke-width: 3px
@end
```

---

### 4) ë‚´ë ˆì´ì…˜ ì„¹ì…˜ ìƒì„±

```javascript
generateNarration() {
  if (this.data.narrations.length === 0) return;
  
  this.dsl += "@narration\n";
  
  this.data.narrations.forEach(narr => {
    this.dsl += `  step ${narr.step}:\n`;
    this.dsl += `    title: "${narr.title}"\n`;
    this.dsl += `    text: "${narr.text}"\n`;
  });
  
  this.dsl += "@end\n\n";
}
```

**ìƒì„± ê²°ê³¼:**
```
@narration
  step 1:
    title: "Genesis Block ìƒì„±"
    text: "ë¸”ë¡ì²´ì¸ì˜ ì²« ë²ˆì§¸ ë¸”ë¡ì´ ìƒì„±ë©ë‹ˆë‹¤."
@end
```

---

### 5) ì„¤ì • ì„¹ì…˜ ìƒì„±

```javascript
generateConfig() {
  const config = this.data.config;
  
  this.dsl += "@config\n";
  
  Object.entries(config).forEach(([key, value]) => {
    this.dsl += `  ${key}: ${value}\n`;
  });
  
  this.dsl += "@end\n";
}
```

**ìƒì„± ê²°ê³¼:**
```
@config
  autoplay: true
  loop: false
  controls: true
  speed: 1.0
@end
```

---

## 2.4 ì‹¤ì‹œê°„ ë³€í™˜ íŠ¸ë¦¬ê±°

### ì‚¬ìš©ì ì•¡ì…˜ë³„ ë³€í™˜ ì‹œì 

```javascript
class DiagramEditor {
  constructor() {
    this.canvasData = initializeCanvas();
    this.dslGenerator = new DslGenerator(this.canvasData);
  }
  
  // ë…¸ë“œ ì¶”ê°€ë¨
  onNodeAdded(node) {
    this.canvasData.nodes.push(node);
    this.updateDsl();
  }
  
  // ë…¸ë“œ ìˆ˜ì •ë¨
  onNodeUpdated(nodeId, changes) {
    const node = this.findNode(nodeId);
    Object.assign(node, changes);
    this.updateDsl();
  }
  
  // ì—°ê²°ì„  ì¶”ê°€ë¨
  onConnectionAdded(connection) {
    this.canvasData.connections.push(connection);
    this.updateDsl();
  }
  
  // ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€ë¨
  onAnimationAdded(animation) {
    this.canvasData.animations.push(animation);
    this.updateDsl();
  }
  
  // DSL ì—…ë°ì´íŠ¸
  updateDsl() {
    const newDsl = this.dslGenerator.generate();
    this.displayDsl(newDsl);
    this.renderDiagram(newDsl);
  }
  
  // DSL í‘œì‹œ
  displayDsl(dsl) {
    document.getElementById('code-preview').textContent = dsl;
  }
  
  // ë‹¤ì´ì–´ê·¸ë¨ ë Œë”ë§
  renderDiagram(dsl) {
    AnimatedDiagram.render({
      source: dsl,
      container: '#diagram-preview',
      autoplay: false
    });
  }
}
```

---

## 2.5 ì—­ë³€í™˜ (DSL â†’ ë¸”ë¡)

ì‚¬ìš©ìê°€ DSL ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •í–ˆì„ ë•Œ:

```javascript
class DslParser {
  parse(dsl) {
    const sections = this.splitSections(dsl);
    
    return {
      nodes: this.parseNodes(sections.diagram),
      connections: this.parseConnections(sections.diagram),
      animations: this.parseAnimations(sections.animation),
      styles: this.parseStyles(sections.style),
      narrations: this.parseNarrations(sections.narration),
      config: this.parseConfig(sections.config)
    };
  }
  
  splitSections(dsl) {
    // @animation, @style ë“± ì„¹ì…˜ ë¶„ë¦¬
    const sections = {};
    
    const animMatch = dsl.match(/@animation([\s\S]*?)@end/);
    if (animMatch) sections.animation = animMatch[1];
    
    const styleMatch = dsl.match(/@style([\s\S]*?)@end/);
    if (styleMatch) sections.style = styleMatch[1];
    
    // ...
    
    return sections;
  }
  
  parseNodes(diagramSection) {
    // ì •ê·œì‹ìœ¼ë¡œ ë…¸ë“œ íŒŒì‹±
    const nodeRegex = /(\w+)([\[\{\(].*?[\]\}\)])/g;
    const nodes = [];
    
    let match;
    while ((match = nodeRegex.exec(diagramSection)) !== null) {
      nodes.push({
        id: match[1],
        label: this.extractLabel(match[2]),
        type: this.detectShape(match[2])
      });
    }
    
    return nodes;
  }
  
  // ... ë‹¤ë¥¸ íŒŒì‹± ë©”ì„œë“œë“¤
}
```

---

## 2.6 UI ìƒí˜¸ì‘ìš© í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ìê°€ "í”„ë¡œì„¸ìŠ¤" ë¸”ë¡ ë“œë˜ê·¸      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìº”ë²„ìŠ¤ì— ë“œë¡­                        â”‚
â”‚  â†’ position: {x: 200, y: 150}        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì†ì„± íŒ¨ë„ ì—´ë¦¼                       â”‚
â”‚  [ë ˆì´ë¸” ì…ë ¥: "Genesis Block"]      â”‚
â”‚  [ìƒ‰ìƒ ì„ íƒ: #4CAF50]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JSON ë°ì´í„° ì—…ë°ì´íŠ¸                 â”‚
â”‚  nodes.push({                        â”‚
â”‚    id: "node_1",                     â”‚
â”‚    type: "rectangle",                â”‚
â”‚    label: "Genesis Block",           â”‚
â”‚    ...                               â”‚
â”‚  })                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DSL ìƒì„±                            â”‚
â”‚  node_1[Genesis Block]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì½”ë“œ ë¯¸ë¦¬ë³´ê¸° ì—…ë°ì´íŠ¸               â”‚
â”‚  (ì˜¤ë¥¸ìª½ íŒ¨ë„ì— DSL í‘œì‹œ)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë‹¤ì´ì–´ê·¸ë¨ ë Œë”ë§                    â”‚
â”‚  (ì‹¤ì‹œê°„ìœ¼ë¡œ ì‹œê°í™”)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì™„ì „í•œ ì˜ˆì‹œ: ë¸”ë¡ ë“œë˜ê·¸ â†’ DSL ìƒì„±

### 1ë‹¨ê³„: ë…¸ë“œ 3ê°œ ì¶”ê°€

```
ì‚¬ìš©ì ì•¡ì…˜:
1. "ì‹œì‘/ë" ë¸”ë¡ ë“œë˜ê·¸ â†’ "Genesis Block"
2. "í”„ë¡œì„¸ìŠ¤" ë¸”ë¡ ë“œë˜ê·¸ â†’ "Block #1"  
3. "í”„ë¡œì„¸ìŠ¤" ë¸”ë¡ ë“œë˜ê·¸ â†’ "Block #2"
```

**ë‚´ë¶€ JSON:**
```json
{
  "nodes": [
    {"id": "node_1", "type": "terminator", "label": "Genesis Block"},
    {"id": "node_2", "type": "rectangle", "label": "Block #1"},
    {"id": "node_3", "type": "rectangle", "label": "Block #2"}
  ]
}
```

**ìƒì„± DSL:**
```
flowchart LR
  node_1([Genesis Block])
  node_2[Block #1]
  node_3[Block #2]
```

---

### 2ë‹¨ê³„: ì—°ê²°ì„  ì¶”ê°€

```
ì‚¬ìš©ì ì•¡ì…˜:
node_1 í´ë¦­ â†’ node_2ë¡œ ë“œë˜ê·¸ (ì—°ê²°ì„  ìƒì„±)
node_2 í´ë¦­ â†’ node_3ë¡œ ë“œë˜ê·¸
```

**ë‚´ë¶€ JSON:**
```json
{
  "connections": [
    {"from": "node_1", "to": "node_2"},
    {"from": "node_2", "to": "node_3"}
  ]
}
```

**ìƒì„± DSL:**
```
flowchart LR
  node_1([Genesis Block])
  node_2[Block #1]
  node_3[Block #2]
  
  node_1 --> node_2
  node_2 --> node_3
```

---

### 3ë‹¨ê³„: ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€

```
ì‚¬ìš©ì ì•¡ì…˜:
1. node_1 ì„ íƒ â†’ "âœ¨ Fade In" íš¨ê³¼ ë“œë˜ê·¸ì•¤ë“œë¡­
2. ì—°ê²°ì„  ì„ íƒ â†’ "âœ¨ Particles" íš¨ê³¼ ì¶”ê°€
```

**ë‚´ë¶€ JSON:**
```json
{
  "animations": [
    {
      "step": 1,
      "type": "show",
      "target": "node_1",
      "effect": "fadeIn",
      "duration": "1.5s"
    },
    {
      "step": 2,
      "type": "connect",
      "from": "node_1",
      "to": "node_2",
      "flow": "particles",
      "speed": "2s"
    }
  ]
}
```

**ìµœì¢… DSL:**
```
flowchart LR
  node_1([Genesis Block])
  node_2[Block #1]
  node_3[Block #2]
  
  node_1 --> node_2
  node_2 --> node_3

@animation
  step 1: show node_1
    duration: 1.5s
    effect: fadeIn

  step 2: connect node_1->node_2
    flow: particles
    speed: 2s
@end
```

---

ì´ì œ ì‚¬ìš©ìëŠ”:
- **ë¹„ì£¼ì–¼í•˜ê²Œ** ë¸”ë¡ì„ ë°°ì¹˜í•˜ê³ 
- **ìë™ìœ¼ë¡œ** DSLì´ ìƒì„±ë˜ê³ 
- **ì‹¤ì‹œê°„ìœ¼ë¡œ** ë‹¤ì´ì–´ê·¸ë¨ì´ ë Œë”ë§ë˜ê³ 
- **ì–¸ì œë“ ì§€** DSL ì½”ë“œë¥¼ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

ë‹¤ìŒìœ¼ë¡œ ê¸°íší•  ë‚´ìš©:
1. **UI/UX ìƒì„¸ ì„¤ê³„** - ì†ì„± íŒ¨ë„, íƒ€ì„ë¼ì¸ ì—ë””í„°
2. **í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬** - ë¯¸ë¦¬ ë§Œë“¤ì–´ì§„ ì˜ˆì‹œë“¤
3. **SDK API ì„¤ê³„** - ê°œë°œììš© ë¬¸ì„œ

ì–´ë–¤ ê±¸ ì§„í–‰í• ê¹Œìš”?