# 최근 작업 정리

이 문서는 AnimFlow DSL 프로젝트의 최근 주요 변경 사항을 정리한 것입니다.

---

## 1. 모노레포 전환

- **pnpm workspace** + **Turborepo** 도입
- 루트: `package.json`, `pnpm-workspace.yaml`, `turbo.json`, `tsconfig.base.json`
- 패키지 구조:
  - `packages/react` → **@animflow-dsl/react** SDK
  - `apps/web` → 데모 웹 애플리케이션 (Next.js)

---

## 2. SDK 패키지 분리

- **core** (파서, 레이아웃, 애니메이션 엔진), **렌더러/컨트롤**, **store**를 `packages/react/src/`로 이동
- **AnimflowPlayer** 컴포넌트를 공개 API로 제공 (`dsl` prop, ref로 play/pause/seek 등)
- **tsup**으로 ESM/CJS 번들 + TypeScript 선언 파일(`.d.ts`) 빌드
- SDK 내부 import는 `@/` alias 대신 **상대 경로**로 통일 (패키지 단독 빌드 대응)

---

## 3. 웹 앱 연동

- `apps/web`에서 `@animflow-dsl/react`의 **AnimflowPlayer**를 import해 사용
- 기존 **DiagramViewer** 제거, 뷰어 역할은 SDK의 AnimflowPlayer로 대체
- **DslEditor**는 `apps/web/components/editor/`에 유지 (Monaco 에디터, 웹 전용)

---

## 4. 프로젝트 정리

- 루트의 중복 디렉터리/파일 제거: `core/`, `components/`, `store/`, `app/`, `data/` 및 구 Next.js 설정 파일
- 루트 **README.md** 갱신: 모노레포 구조, 시작하기, SDK 사용 예시
- **packages/react/README.md** 추가: SDK 설치·사용법, Props, Imperative API, DSL 예시

---

## 5. Git 커밋 히스토리 (관련 커밋 요약)

- SDK import 경로 수정 (상대 경로)
- SDK 빌드 설정 수정 (tsconfig `incremental`, package.json `exports` 순서)
- 모노레포 정리 및 문서화 (중복 제거, README 작성)

---

## 참고 문서

- **시작하기**: 루트 [README.md](../README.md)
- **SDK 사용법**: [packages/react/README.md](../packages/react/README.md)
- **DSL 문법**: [DSL 전체 구조.md](../DSL%20전체%20구조.md)
